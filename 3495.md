## Minimum Operations to Make Array Elements Zero

虽然最大也就`4**15`，针对每个查询可以当做$O(1)$来看，但是如果用 `bit_length` 优化掉浮点的 `log`，用前缀和处理中间的完整块，还能更优化。

```python
def helper(a: int, b: int) -> int:
    l4a = int(log(a, 4))
    l4b = int(log(b, 4))
    if l4a == l4b:
        return ((b-a+1)*(l4a+1)+1)//2
    elif l4a+1 == l4b:
        d = 4**l4b
        return ((d-a)*(l4a+1) + (b-d+1)*(l4b+1) + 1)//2
    else:
        p = l4a+1
        cur = a
        res = 0
        while p <= l4b:
            res += (4**p-cur)*p
            cur = 4**p
            p += 1
        res += (b-cur+1)*p
        return (res+1)//2
    # never reached
    return 0

class Solution:
    def minOperations(self, queries: List[List[int]]) -> int:
        return sum(helper(*q) for q in queries)
```