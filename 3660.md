## Jump Game IX

开始一看觉得是有向图，找到成环的地方停止搜索。后来一看从后往前找的话不需要找到成环的地方就可以停止了。于是用prefix/postfix要优化很多。

实际写的时候折腾了半天，从后往前捋一遍的时候不应该用`premax[i]`对比`postmin[i]`，而应该用`premax[i]`对比`postmin[i+1]`，而且直接从后边一个的值拉过来就行了，就不需要记录“上一次最大值到哪来着”之类的问题了。

顺带，虽然这个版本已经是$O(1)$时间复杂度了，但是对比用时更少的代码，还有个重点优化地方需要提及：第一个循环中，把前向和后向两个向量一起做了，但是对于c++编译器来说，（对比写python/Matlab时的减少循环次数，）让循环更简单、更可预测是更重要的。

```cpp
class Solution {
public:
    vector<int> maxValue(vector<int>& nums) {
        int l = nums.size();
        if (l == 1) return nums;
        std::vector<int> res(nums);
        std::vector<int> postmin(nums);
        for (int i=1; i<l; i++) {
            res[i] = max(res[i], res[i-1]);
            postmin[l-i-1] = min(postmin[l-i-1], postmin[l-i]);
        }
        for (int i=l-2; i>-1; i--) {
            if (res[i] > postmin[i+1]) { res[i] = res[i+1]; }
        }
        return res;
    }
};
```