## Decode Ways

常规来讲，```dp(i)```为截止至```s[i]```时的```numDecodings```。对比自己写出来的丑陋代码，可以看到，有些时候不从“甚么情况下不加”而是从“什么情况下需要加”的角度来思考的话可能会清晰许多。

```python
class Solution:
    def numDecodings(self, s):
        @lru_cache(None)
        def dp(i):
            if i == -1: return 1
            ans = 0
            if s[i] > "0": ans += dp(i-1)
            if i >= 1 and "10" <= s[i-1:i+1] <= "26":
                ans += dp(i-2)
            return ans
        
        return dp(len(s) - 1)
```

附另一个大佬的更简洁的代码 :

```python
class Solution:
    def numDecodings(self, s: str) -> int:
        dp1 = dp2 = dp3 = 1
        for i in range(len(s)):
            dp1, dp2, dp3 = dp2, dp3, 0
            if s[i] != "0": dp3 += dp2
            if i - 1 >= 0 and s[i - 1] != "0" and 1 <= int(s[i - 1:i + 1]) <= 26: dp3 += dp1
        return dp3
```

明明从前往后从后往前都能dp，然而只有我写出如此丑陋的代码，还是要继续努力学习多增长知识啊！

```python
class Solution:
    def numDecodings(self, s: str) -> int:
        @cache
        def dp(i):
            if i == -1:
                return 1
            if i == 0:
                if s[0] == '0':
                    return 0
                else:
                    return 1
            if s[i-1] == '0':
                if s[i] == '0':
                    return 0
                else:
                    return dp(i-1)
            elif int(s[i-1:i+1]) < 27:
                if s[i] == '0':
                    return dp(i-2)
                return dp(i-1) + dp(i-2)
            elif s[i] == '0':
                return 0
            else:
                return dp(i-1)
        return dp(len(s)-1)
```
