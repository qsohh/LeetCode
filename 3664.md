## Two-Letter Card Game

前边分组数数很普通，然后要尽量条理化地配对：
- 对于`x？`和`？x`各自配对出最大的成对数和剩余单个数；
- 把`xx`和上边两组里剩余单个配对；
- 如果`xx`有剩余，拆出已经配好对的`x?`和`?x`来搭配，要看哪个先耗尽。

```python
class Solution:
    def score(self, cards: List[str], x: str) -> int:
        ctl = Counter()
        ctr = Counter()
        ctxx = 0
        for a, b in cards:
            if x == a == b:
                ctxx += 1
            elif x == a:
                ctl[b] += 1
            elif x == b:
                ctr[a] += 1
        
        def side_pairs(ct):
            if not ct:
                return 0, 0
            tot = sum(ct.values())
            mx = max(ct.values())
            pairs = min(tot//2, tot-mx)
            remain = tot - pairs*2
            return pairs, remain

        pl, rl = side_pairs(ctl)
        pr, rr = side_pairs(ctr)
        res = pl + pr
        use_xx = min(ctxx, rl+rr)
        res += use_xx
        remain_xx = ctxx - use_xx
        res += min(pl + pr, remain_xx//2)
        return res
```